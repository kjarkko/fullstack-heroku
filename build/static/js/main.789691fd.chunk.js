(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{24:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),s=n.n(c),u=n(18),i=n.n(u),a=(n(24),n(5)),o=n(9),j=n(3),l=function(e){var t=e.text;return Object(r.jsx)("h2",{children:t})},b=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})},f=function(e){var t=e.fields;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{children:[e.name,":"]}),Object(r.jsx)(b,{value:e.value,setValue:e.setValue})]},e.name)}))})},d=function(e,t){return function(n){n.preventDefault();var r=Object.fromEntries(e.map((function(e){return[e.name,e.value]})));console.log("form submitted",r),t(r)}},O=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("form",{onSubmit:d(t,n),children:[Object(r.jsx)(f,{fields:t}),Object(r.jsx)("button",{type:"submit",children:"add"})]})},v=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"add a new person"}),Object(r.jsx)(O,{fields:t,create:n})]})},h=n(6),x=n.n(h),m=function(e){return"/api".concat(e)},p=function(){return x.a.get(m("/persons"))},S=function(e){return x.a.post(m("/persons"),e)},g=function(e,t){return x.a.patch(m("/persons/".concat(t)),e)},w=function(e){if(null!==e&&void 0!==e)return x.a.delete(m("/persons/".concat(e)))},V=function(e){var t=e.name,n=e.number,c=e.id,s=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:t}),Object(r.jsx)("p",{children:n}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),s(c)},children:"delete"})]})},k=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsx)("ul",{children:t.filter((function(e){return e.name.includes(n)})).map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(V,Object(a.a)(Object(a.a)({},e),{},{remove:c}))},e.id)}))})},y=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"Numbers"}),Object(r.jsx)(k,{persons:t,filter:n,remove:c})]})},E=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"filter shown with"}),Object(r.jsx)(b,{value:t,setValue:n})]})},C=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"Phonebook"}),Object(r.jsx)(E,{search:t,setSearch:n})]})},D=(n(42),function(e){var t=e.message,n=e.type;return""!==t?Object(r.jsx)("div",{className:n,children:t}):Object(r.jsx)("div",{})}),J=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],s=t[1],u=Object(c.useState)(""),i=Object(j.a)(u,2),l=i[0],b=i[1],f=Object(c.useState)(""),d=Object(j.a)(f,2),O=d[0],h=d[1],x=function(){return setTimeout((function(){return b("")}),5e3)},m=function(e){b(e),h("info"),x()};Object(c.useEffect)((function(){p().then((function(e){return s(e.data)}))}),[]);var V=Object(c.useState)(""),k=Object(j.a)(V,2),E=k[0],J=k[1],N=Object(c.useState)(""),B=Object(j.a)(N,2),I=B[0],M=B[1],P=Object(c.useState)(""),T=Object(j.a)(P,2),q=[{name:"name",value:I,setValue:M},{name:"number",value:T[0],setValue:T[1]}];return Object(r.jsxs)("div",{children:[Object(r.jsx)(D,{message:l,type:O}),Object(r.jsx)(C,{search:E,setSearch:J}),Object(r.jsx)(v,{fields:q,create:function(e){var t=n.find((function(t){return t.name===e.name}));if(void 0!==t){if(window.confirm("update user?")){g(e,t.id);var r=Object(o.a)(n);r[t]=e,s(r),m("updated user")}}else{S(e);var c=[].concat(Object(o.a)(n),[Object(a.a)({},e)]);console.log("setting persons to",c),s(c),m("created user")}}}),Object(r.jsx)(y,{persons:n,filter:E,remove:function(e){if(window.confirm("delete user?")){w(e).then((function(){return m("deleted user")})).catch((function(e){return b("person does not exist on server"),h("error"),void x()}));var t=n.filter((function(t){return t.id!==e}));s(t)}}})]})};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(J,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.789691fd.chunk.js.map