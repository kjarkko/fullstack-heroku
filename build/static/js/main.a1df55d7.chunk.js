(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{24:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),u=n.n(c),s=n(18),i=n.n(s),a=(n(24),n(5)),o=n(9),j=n(3),l=function(e){var t=e.text;return Object(r.jsx)("h2",{children:t})},f=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})},d=function(e){var t=e.fields;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{children:[e.name,":"]}),Object(r.jsx)(f,{value:e.value,setValue:e.setValue})]},e.name)}))})},b=function(e,t){return function(n){n.preventDefault();var r=Object.fromEntries(e.map((function(e){return[e.name,e.value]})));console.log("form submitted",r),t(r)}},O=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("form",{onSubmit:b(t,n),children:[Object(r.jsx)(d,{fields:t}),Object(r.jsx)("button",{type:"submit",children:"add"})]})},v=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"add a new person"}),Object(r.jsx)(O,{fields:t,create:n})]})},h=function(e){var t=e.name,n=e.number,c=e.id,u=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:t}),Object(r.jsx)("p",{children:n}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),u(c)},children:"delete"})]})},x=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsx)("ul",{children:t.filter((function(e){return e.name.includes(n)})).map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(h,Object(a.a)(Object(a.a)({},e),{},{remove:c}))},e.id)}))})},m=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"Numbers"}),Object(r.jsx)(x,{persons:t,filter:n,remove:c})]})},p=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"filter shown with"}),Object(r.jsx)(f,{value:t,setValue:n})]})},S=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{text:"Phonebook"}),Object(r.jsx)(p,{search:t,setSearch:n})]})},g=n(6),w=n.n(g),V=function(e){return"/api".concat(e)},k=function(){return w.a.get(V("/persons"))},y=function(e){return w.a.post(V("/persons"),e)},E=function(e,t){return w.a.put(V("/persons/".concat(t)),e)},C=function(e){if(null!==e&&void 0!==e)return w.a.delete(V("/persons/".concat(e)))},D=(n(42),function(e){var t=e.message,n=e.type;return""!==t?Object(r.jsx)("div",{className:n,children:t}):Object(r.jsx)("div",{})}),I=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],u=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),l=i[0],f=i[1],d=Object(c.useState)(""),b=Object(j.a)(d,2),O=b[0],h=b[1],x=function(){return setTimeout((function(){return f("")}),5e3)},p=function(e){f(e),h("info"),x()};Object(c.useEffect)((function(){k().then((function(e){return u(e.data)}))}),[]);var g=Object(c.useState)(""),w=Object(j.a)(g,2),V=w[0],I=w[1],J=Object(c.useState)(""),N=Object(j.a)(J,2),B=N[0],M=N[1],P=Object(c.useState)(""),T=Object(j.a)(P,2),q=[{name:"name",value:B,setValue:M},{name:"number",value:T[0],setValue:T[1]}];return Object(r.jsxs)("div",{children:[Object(r.jsx)(D,{message:l,type:O}),Object(r.jsx)(S,{search:V,setSearch:I}),Object(r.jsx)(v,{fields:q,create:function(e){var t=n.find((function(t){return t.name===e.name}));t?window.confirm("update user?")&&E(e,t.id).then((function(e){var t=Object(o.a)(n),r=t.findIndex((function(t){return t.id===e.id}));t[r]=e,u(t),p("updated user")})):y(e).then((function(e){var t=[].concat(Object(o.a)(n),[Object(a.a)({},e)]);console.log("setting persons to",t),u(t),p("created user")}))}}),Object(r.jsx)(m,{persons:n,filter:V,remove:function(e){if(window.confirm("delete user?")){C(e).then((function(){return p("deleted user")})).catch((function(e){return f("person does not exist on server"),h("error"),void x()}));var t=n.filter((function(t){return t.id!==e}));u(t)}}})]})};i.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.a1df55d7.chunk.js.map