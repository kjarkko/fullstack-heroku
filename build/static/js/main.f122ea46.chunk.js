(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),u=n.n(c),s=n(15),i=n.n(s),a=(n(21),n(3)),o=function(e){var t=e.text;return Object(r.jsx)("h2",{children:t})},j=function(e){var t=e.value,n=e.setValue;return Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})},l=function(e){var t=e.fields;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsxs)("li",{children:[Object(r.jsxs)("p",{children:[e.name,":"]}),Object(r.jsx)(j,{value:e.value,setValue:e.setValue})]},e.name)}))})},f=function(e,t){return function(n){n.preventDefault();var r=Object.fromEntries(e.map((function(e){return[e.name,e.value]})));console.log("form submitted",r),t(r)}},d=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("form",{onSubmit:f(t,n),children:[Object(r.jsx)(l,{fields:t}),Object(r.jsx)("button",{type:"submit",children:"add"})]})},b=function(e){var t=e.fields,n=e.create;return Object(r.jsxs)("div",{children:[Object(r.jsx)(o,{text:"add a new person"}),Object(r.jsx)(d,{fields:t,create:n})]})},O=n(6),h=function(e){var t=e.name,n=e.number,c=e.id,u=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:t}),Object(r.jsx)("p",{children:n}),Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),u(c)},children:"delete"})]})},v=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsx)("ul",{children:t.filter((function(e){return e.name.includes(n)})).map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(h,Object(O.a)(Object(O.a)({},e),{},{remove:c}))},e.id)}))})},x=function(e){var t=e.persons,n=e.filter,c=e.remove;return Object(r.jsxs)("div",{children:[Object(r.jsx)(o,{text:"Numbers"}),Object(r.jsx)(v,{persons:t,filter:n,remove:c})]})},m=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"filter shown with"}),Object(r.jsx)(j,{value:t,setValue:n})]})},p=function(e){var t=e.search,n=e.setSearch;return Object(r.jsxs)("div",{children:[Object(r.jsx)(o,{text:"Phonebook"}),Object(r.jsx)(m,{search:t,setSearch:n})]})},S=n(4),g=n.n(S),w=function(e){return"/api".concat(e)},V=function(){return g.a.get(w("/persons"))},k=function(e){return g.a.post(w("/persons"),e)},y=function(e,t){return g.a.put(w("/persons/".concat(t)),e)},E=function(e){if(null!==e&&void 0!==e)return g.a.delete(w("/persons/".concat(e)))},C=(n(39),function(e){var t=e.message,n=e.type;return""!==t?Object(r.jsx)("div",{className:n,children:t}):Object(r.jsx)("div",{})}),D=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],u=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),o=i[0],j=i[1],l=Object(c.useState)(""),f=Object(a.a)(l,2),d=f[0],O=f[1],h=function(){return setTimeout((function(){return j("")}),5e3)},v=function(e){j(e),O("info"),h()},m=function(e){j(e),O("error"),h()};Object(c.useEffect)((function(){V().then((function(e){return u(e.data)}))}),[]);var S=Object(c.useState)(""),g=Object(a.a)(S,2),w=g[0],D=g[1],J=Object(c.useState)(""),N=Object(a.a)(J,2),B=N[0],I=N[1],M=Object(c.useState)(""),P=Object(a.a)(M,2),T=[{name:"name",value:B,setValue:I},{name:"number",value:P[0],setValue:P[1]}];return Object(r.jsxs)("div",{children:[Object(r.jsx)(C,{message:o,type:d}),Object(r.jsx)(p,{search:w,setSearch:D}),Object(r.jsx)(b,{fields:T,create:function(e){var t=n.find((function(t){return t.name===e.name}));t?window.confirm("update user?")&&y(e,t.id).then((function(e){v("updated user"),V().then((function(e){return u(e.data)}))})).catch((function(e){return m(e.toString())})):k(e).then((function(e){v("created user"),V().then((function(e){return u(e.data)}))})).catch((function(e){return m(e.toString())}))}}),Object(r.jsx)(x,{persons:n,filter:w,remove:function(e){window.confirm("delete user?")&&E(e).then((function(){v("deleted user"),V().then((function(e){return u(e.data)}))})).catch((function(e){return m("person does not exist on server")}))}})]})};i.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(D,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f122ea46.chunk.js.map